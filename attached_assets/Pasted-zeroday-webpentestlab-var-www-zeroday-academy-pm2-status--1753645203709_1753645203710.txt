zeroday@webpentestlab:/var/www/zeroday-academy$ pm2 status
┌────┬────────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name               │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ zeroday-academy    │ default     │ 1.0.0   │ fork    │ 311405   │ 7s     │ 0    │ online    │ 0%       │ 112.0mb  │ zeroday  │ disabled │
└────┴────────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
zeroday@webpentestlab:/var/www/zeroday-academy$ sudo cp /root/mido/zeroday-academy/github-upload/nginx.conf /etc/nginx/sites-available/zeroday-academy
zeroday@webpentestlab:/var/www/zeroday-academy$ sudo ln -sf /etc/nginx/sites-available/zeroday-academy /etc/nginx/sites-enabled/
sudo rm -f /etc/nginx/sites-enabled/default
zeroday@webpentestlab:/var/www/zeroday-academy$ sudo nginx -t
sudo systemctl restart nginx
2025/07/27 19:38:04 [emerg] 311449#311449: "limit_req_zone" directive is not allowed here in /etc/nginx/sites-enabled/zeroday-academy:13
nginx: configuration file /etc/nginx/nginx.conf test failed
Job for nginx.service failed because the control process exited with error code.
See "systemctl status nginx.service" and "journalctl -xeu nginx.service" for details.
zeroday@webpentestlab:/var/www/zeroday-academy$ sudo tee /etc/nginx/sites-available/zeroday-academy > /dev/null << 'EOF'
server {
    listen 80;
    server_name _;  # Accept any domain name

    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;
    add_header X-Robots-Tag "noindex, nofollow" always;

    # Main application proxy
    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 86400;
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
    }

    # Static files caching
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
        proxy_pass http://localhost:5000;
    }

    # Security: Block access to sensitive files
    location ~ /\.(env|git|svn) {
        deny all;
        return 404;
    }

    # Security: Block access to backup files
    location ~ \.(bak|backup|swp|tmp)$ {
        deny all;
        return 404;
    }
}
EOF
zeroday@webpentestlab:/var/www/zeroday-academy$ sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
zeroday@webpentestlab:/var/www/zeroday-academy$ sudo systemctl restart nginx
zeroday@webpentestlab:/var/www/zeroday-academy$ sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw --force enable
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Rules updated
Rules updated (v6)
Firewall is active and enabled on system startup
zeroday@webpentestlab:/var/www/zeroday-academy$ pm2 save
pm2 startup
[PM2] Saving current process list...
[PM2] Successfully saved in /home/zeroday/.pm2/dump.pm2
[PM2] Init System found: systemd
[PM2] To setup the Startup Script, copy/paste the following command:
sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u zeroday --hp /home/zeroday
zeroday@webpentestlab:/var/www/zeroday-academy$ curl -I http://localhost
HTTP/1.1 200 OK
Server: nginx/1.26.0 (Ubuntu)
Date: Sun, 27 Jul 2025 19:39:09 GMT
Content-Type: text/html; charset=utf-8
Connection: keep-alive
X-Powered-By: Express
Vary: Origin
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Referrer-Policy: no-referrer-when-downgrade
X-Robots-Tag: noindex, nofollow

zeroday@webpentestlab:/var/www/zeroday-academy$ pm2 status
sudo systemctl status nginx
┌────┬────────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name               │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ zeroday-academy    │ default     │ 1.0.0   │ fork    │ 311702   │ 6s     │ 1    │ online    │ 0%       │ 111.7mb  │ zeroday  │ disabled │
└────┴────────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
● nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-07-27 19:38:52 UTC; 23s ago
 Invocation: 42676ad4ee124685aecbcbfbcb7833cb
       Docs: man:nginx(8)
    Process: 311478 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
    Process: 311480 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
   Main PID: 311481 (nginx)
      Tasks: 2 (limit: 2318)
     Memory: 2.1M (peak: 2.4M)
        CPU: 36ms
     CGroup: /system.slice/nginx.service
             ├─311481 "nginx: master process /usr/sbin/nginx -g daemon on; master_process on;"
             └─311482 "nginx: worker process"

Jul 27 19:38:52 webpentestlab systemd[1]: Starting nginx.service - A high performance web server and a reverse proxy server...
Jul 27 19:38:52 webpentestlab systemd[1]: Started nginx.service - A high performance web server and a reverse proxy server.